<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test WebGL</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #22c55e; }
        .error { background: #ef4444; }
        .warning { background: #f59e0b; }
        canvas {
            border: 2px solid #666;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>üîç Diagnostic WebGL</h1>
    <div id="results"></div>
    <canvas id="testCanvas" width="400" height="300"></canvas>

    <script>
        const results = document.getElementById('results');
        
        function addStatus(message, type = 'success') {
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }

        // Test 1: Basic WebGL support
        const canvas = document.getElementById('testCanvas');
        let gl = canvas.getContext('webgl');
        
        if (!gl) {
            gl = canvas.getContext('experimental-webgl');
        }

        if (gl) {
            addStatus('‚úÖ WebGL est support√©!', 'success');
            
            // Get WebGL info
            const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
            if (debugInfo) {
                const vendor = gl.getParameter(debugInfo.UNMASKED_VENDOR_WEBGL);
                const renderer = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
                addStatus(`GPU Vendor: ${vendor}`, 'success');
                addStatus(`GPU Renderer: ${renderer}`, 'success');
            }
            
            addStatus(`WebGL Version: ${gl.getParameter(gl.VERSION)}`, 'success');
            addStatus(`GLSL Version: ${gl.getParameter(gl.SHADING_LANGUAGE_VERSION)}`, 'success');
            addStatus(`Max Texture Size: ${gl.getParameter(gl.MAX_TEXTURE_SIZE)}`, 'success');
            
            // Draw a simple triangle
            gl.clearColor(0.2, 0.3, 0.8, 1.0);
            gl.clear(gl.COLOR_BUFFER_BIT);
            
            const vertexShader = gl.createShader(gl.VERTEX_SHADER);
            gl.shaderSource(vertexShader, `
                attribute vec2 position;
                void main() {
                    gl_Position = vec4(position, 0.0, 1.0);
                }
            `);
            gl.compileShader(vertexShader);
            
            const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);
            gl.shaderSource(fragmentShader, `
                precision mediump float;
                void main() {
                    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
                }
            `);
            gl.compileShader(fragmentShader);
            
            const program = gl.createProgram();
            gl.attachShader(program, vertexShader);
            gl.attachShader(program, fragmentShader);
            gl.linkProgram(program);
            gl.useProgram(program);
            
            const vertices = new Float32Array([
                0.0, 0.5,
                -0.5, -0.5,
                0.5, -0.5
            ]);
            
            const buffer = gl.createBuffer();
            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
            gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);
            
            const positionLocation = gl.getAttribLocation(program, 'position');
            gl.enableVertexAttribArray(positionLocation);
            gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
            
            gl.drawArrays(gl.TRIANGLES, 0, 3);
            
            addStatus('‚úÖ Triangle WebGL dessin√© avec succ√®s!', 'success');
            addStatus('üéâ Votre navigateur supporte compl√®tement WebGL!', 'success');
            
        } else {
            addStatus('‚ùå WebGL n\'est PAS support√©', 'error');
            addStatus('V√©rifiez les param√®tres de votre navigateur:', 'warning');
            addStatus('- Chrome: chrome://flags (activer "WebGL")', 'warning');
            addStatus('- Firefox: about:config (webgl.disabled = false)', 'warning');
            addStatus('- Edge: edge://flags (activer "WebGL")', 'warning');
        }

        // Check OGL library
        addStatus('‚ÑπÔ∏è Pour Threads, v√©rifiez que la biblioth√®que OGL est install√©e: npm install ogl', 'warning');
    </script>
</body>
</html>
